---
modules:
  - docassemble.base.util
  - docassemble.base.legal
  - docassemble.income.income
  - dateutil
  - .educational_evaluations
  - .prs
  - docassemble.ALToolbox.misc
  - docassemble.AssemblyLine.al_general
  - docassemble.AssemblyLine.al_document
  - docassemble.AssemblyLine.al_courts
---
include:
  - docassemble.AssemblyLine:assembly_line.yml
  - docassemble.AssemblyLine:al_package_unstyled.yml
  - docassemble.AssemblyLine:al_document.yml  
---
code: AL_DEFAULT_STATE = "MA"
---
metadata:
    description: |
        Basic information, objects, and module imports needed for all educational evaluation request letters
    authors:
        - name: Matt Brooks
          organization: Lemma Legal

    revision_date: 2020-06-17
---
objects:
    - requestor: ALIndividual
    - school: Person
---
features:
  bootstrap theme: mac-bootstrap.css
  progress bar: True
  question back button: True
  question help button: True
  css:
    - docassemble.ALToolbox:collapse_template.css
---
objects:
    - school.recipient: ALIndividual
    - school.special_education_director: ALIndividual
    - school.special_education_coordinator: ALIndividual
    - student: ALIndividual
    - evaluations_list: DAList
    - evaluation: DAObject
---
default screen parts:
  post: |
    % if not user_logged_in():
    [:sign-in-alt: Sign-in](${url_of('login', next=interview_url())}) or [register](${url_of('register', next=interview_url())}) to save your progress.
    % endif

    Feedback, suggestions, or comments? [Complete this survey](${ interview_url(i=user_info().package + ":feedback.yml", github_repo="docassemble-StudentEvaluations", github_user='nonprofittechy', variable=user_info().variable, question_id=user_info().question_id, local=False,reset=1)} ){:target="_blank"}.
  pre: |
    % if get_config('debug'):
    `id: ${ user_info().question_id }`
    % endif
---
code: |
  student.age = student.age_in_years()
---
id: interview order
sets: mac_shared_intro_questions
scan for variables: False
comment: |
	## Mandatory block that determines interview order.
# mandatory: True
code: |
  allow_cron = True
  multi_user = True
  # welcome_screen_seen
  before_you_start_screen_seen  
  student.name.first
  if not is_child_in_school:
    call_the_hotline
  requestor.language
  #if requestor.language == 'Other':
  #  kick_out_language    
  requestor.right_to_send
  if requestor.right_to_send == 'Other':
    kick_out_requestor
  #else:
  #  pass
  if requestor.right_to_send == 'Student':
    requestor.name = student.name
  requestor.name.first
  requestor.address.address
  requestor.phone_number
  if is_child_in_school == False:
    student.grade = "Not yet in school"
  if requestor.right_to_send == 'Student':
    student.name.first = requestor.name.first
    student.name.last = requestor.name.last
    student.language = requestor.language
  else:
    student.name.first
  if student.grade == "Not yet in school":
    student.grade = 'soon-to-be'
  else:
    school.recipient.name = school.special_education_coordinator.name
    school.recipient.address = school.special_education_coordinator.address
    if not knows_special_education_director_name:
      school.special_education_coordinator.name = "Special Education Coordinator"
  school.recipient.name
  if not student.grade == "soon-to-be": 
    school.address.address
  else:
    pass
  # if school.special_education_director.requestor_knows_address == False:
  school.special_education_director.address = None
  mac_shared_intro_questions = True
---
id: welcome screen
field: welcome_screen_seen
question: |
  Welcome to MAC's Request for Initial Special Education Evaluation Interview.
subquestion: |
  The following questions will help you write a letter to request a school special education evaluation for your child or a child that you know.  
  You might want to request a school {evaluation} if you think your child or a child that you know needs services to learn.
  If you want to speak to a person before deciding if you want to request an evaluation, you can call or send an email to our  [Helpline](https://massadvocates.org/helpline/) at Massachusetts Advocates for Children.  
  
  It might take up to 3 business days for a person to respond to your call or email. 

  [Massachusetts Advocates for Children Helpline](https://massadvocates.org/helpline/)

  These questions will take approximately **15 minutes** to fill out. When done, you can email the letter directly to the school district by email 
  or you can print the letter and bring it to the school yourself.

  **IMPORTANT!** If you bring it to the school be sure print a copy for yourself. 
  If you can’t print a copy for yourself, when you bring the letter to the school, ask them to make a copy for you to keep for your records.
terms:
  evaluation: |
    An evaluation is testing that a specialist does to see how your child is learning and developing. The specialist may also recommend services and supports for your child as part of their educational programming. An evaluation is sometimes called an assessment.
---
id: is child in school screen
question: |
  Is ${ student.familiar() } enrolled in school?
yesno: is_child_in_school
---
id: before you start screen child not in school
field: before_you_start_screen_seen
question: |
  Getting started
subquestion: |
  Before you start, you will need:
  
  1. The name and address of the special education coordinator or director for 
     your child's school.
  2. Your child's full name and date of birth.
  
  You can find the name of your school's special education director 
  [here](https://eecweb.eec.state.ma.us/ChildCareSearch/Special.aspx).
  
  The name of the special education coordinator is listed on your child's
  IEP.

  This form is not legal or medical advice.
help:
  label: |
    How can I get medical or legal advice?
  content: |
    Contact a lawyer if you need legal advice. Contact your child’s pediatrician if you have questions about what evaluations your child 
    may need after completing this questionnaire. This is not intended to diagnose any condition, but rather to suggest areas in which your child may need support to 
    learn based on your observations and concerns of your child.

---
# if: |
#   is_child_in_school == True
# id: before you start screen child in school
# field: before_you_start_screen_seen
# question: |
#   Before you start, you will need the name and address of the child's school. You will also need the child’s full name and date of birth. 
#   It is helpful if you have the name of the {special education coordinator} at your child’s school or the name of the special education director.  
#  
# under: |
# 
#   This is not legal advice or medical advice. Contact a lawyer if you need legal advice. Contact your child’s pediatrician if you have questions about what evaluations your child 
#   may need after completing this questionnaire. This is not intended to diagnose any condition, but rather to suggest areas in which your child may need support to 
#   learn based on your observations and concerns of your child.
# terms:
#   special education coordinator: |
#     The name of the special education coordinator should be listed on your child’s IEP.  If you do not know the name of the special education coordinator, 
#     you can try looking at the school webpage or doing an internet search using your child’s school district.
# 
---
id: primary language
question: |
  What language do you speak best?
fields:
    - Language: requestor.language
      input type: radio
      choices:
        - English: English
        - Spanish: Spanish
        - Arabic: Arabic
        - Cantonese: Cantonese
        - Cape Verdean: Cape Verdean Creole
        - French: French
        - Haitian Creole: Haitian Creole        
        - Mandarin: Mandarin
        - Portuguese: Portuguese
        - Other: Other
    - Other Language: requestor.language
      show if:
        variable: requestor.language
        is: Other
--- 
id: requestor right to send
question: |
  How are **you** related to ${ student.familiar() }?
subquestion: |
  ${ collapse_template(what_if_I_am_advocate) }
fields:
    - Relationship: requestor.right_to_send
      input type: radio
      choices:
        - Parent: Parent
        - Legal Guardian: Legal Guardian
        - I am ${ student.familiar() }: Student
        - Other: Other
---
template: what_if_I_am_advocate
subject: |
  What if I am an advocate representing ${ student.familiar() }?
content: |
  Choose the option that represents the person that you want the letter to
  be **from**. If you are requesting the documents to be sent directly to
  you, you will need a release of information.
---
sets:
  - requestor.name.first
id: requestor name
question: |
  Who are you?
fields:
  - code: |
      requestor.name_fields()
---
sets:
  - requestor.address.address
  - requestor.address.city
id: requestor address
question: |
  What is your address?
fields:
  - code: |
      requestor.address_fields(default_state="MA")
---
id: requestor phone number and email
question: |
  What is your preferred phone number and email?
fields:
  - Phone Number: requestor.phone_number
    required: False
  - Email: requestor.email
    datatype: email
    required: False
validation code: |
  if not(requestor.phone_number) and not(requestor.email):
    validation_error("You need to provide at least one contact method.",field="requestor.phone_number")
---
sets:
  - student.name.first
id: student name
question: |
  Who is this letter for?
subquestion: |
  Write the name of the student who needs or currently
  receives special education services.
fields:
  - code: |
      student.name_fields()
---
id: student information
question: |
  % if requestor.right_to_send == 'Student':
  Information about you
  % else:
  Information about ${student.name.first}
  % endif
fields:
    - Birthdate: student.birthdate
      datatype: BirthDate
    - code: |
        student.gender_fields()
    - Grade: student.grade
      hide if:
        code: |
          is_child_in_school == False
      choices:
        - Not yet in school: Not yet in school
        - Pre-K: Pre-K
        - Kindergarten: Kindergarten
        - 1st: 1st
        - 2nd: 2nd
        - 3rd: 3rd
        - 4th: 4th
        - 5th: 5th
        - 6th: 6th
        - 7th: 7th
        - 8th: 8th
        - 9th: 9th
        - 10th: 10th
        - 11th: 11th
        - 12th: 12th
    - Language: student.language
      choices:
        - English: English
        - Spanish: Spanish
        - Arabic: Arabic
        - Cantonese: Cantonese
        - Cape Verdean: Cape Verdean Creole
        - French: French
        - Haitian Creole: Haitian Creole        
        - Mandarin: Mandarin
        - Portuguese: Portuguese
        - Other: Other
    - Other Language: student.language
      show if:
        variable: student.language
        is: Other
    ## - Year of Enrollment at School: student.enrollment_year
    ##  datatype: number
    ## currently not used in any of the letters. May need to re-implement later.
---
id: school information
question: |
  % if requestor.right_to_send == "Student":
  Where do you go to school?
  % elif student.grade == 'Not yet in school':
  Where will ${ student.name.first } go to school?
  % else:
  Where does ${ student.name.first } go to school?
  % endif
fields:
    - School Name: school.name.text
    - Street Address: school.address.address
      address autocomplete: True
    - City: school.address.city
    - State: school.address.state
      default: MA
      code: |
        states_list()
    - Zip: school.address.zip
      required: False
---
id: special education director address in school
question: |
  Please fill out the following information.
fields:
    - "Do you know the Special Education Director's address?": school.special_education_director.requestor_knows_address
      datatype: yesnoradio
    - Street Address: school.special_education_director.address.address
      show if: school.special_education_director.requestor_knows_address
      address autocomplete: True
    - City: school.special_education_director.address.city
      show if: school.special_education_director.requestor_knows_address
    - State: school.special_education_director.address.state
      show if: school.special_education_director.requestor_knows_address
      default: MA
      code: |
        states_list()
    - Zip: school.special_education_director.address.zip
      show if: school.special_education_director.requestor_knows_address
      required: False
under: |
  Because ${student.name.first} is not yet in school, you need to send this letter to the special education director
  for where you live. You can find out who your special education director is by searching [here](https://eecweb.eec.state.ma.us/ChildCareSearch/Special.aspx).
---
id: special education coordinator information
question: |
  Special Education Coordinator
fields:
  - "Do you know the name of the {special education coordinator} for ${ student.familiar() }?": knows_special_education_director_name
    datatype: yesnoradio
  - Recipient Title: school.recipient.title
    required: False
    show if: knows_special_education_director_name
    choices:
      - Dr.
      - Mrs.
      - Miss
      - Ms.
      - Mr.
  - Recipient First Name: school.special_education_coordinator.name.first
    show if: knows_special_education_director_name
  - Recipient Last Name: school.special_education_coordinator.name.last
    show if: knows_special_education_director_name
subquestion: |
   The name of the special education coordinator should be listed on your child’s IEP.  If you do not know the name of the special education coordinator, 
   you can try looking at the school webpage or doing an internet search using your child’s school district.
terms:
  IEP: |
    What is an IEP? An IEP is an Individualized Education Program.  It tells the school ${ student.name.first } has a disability and needs 
    certain services and supports to learn. The IEP describes the services and supports the school must give to ${ student.name.first }. 
    The evaluations the school does might show that ${ student.name.first } needs an IEP. If ${ student.name.first } already has an IEP, 
    the evaluations might show that ${ student.name.first } needs more services.
  special education coordinator: |
    The name of the special education coordinator should be listed on your child’s IEP.  If you do not know the name of the special education coordinator, 
    you can try looking at the school webpage or doing an internet search using your child’s school district.
---
id: special education director information
question: |
  Name of Special Education Director
fields:
  - "Do you know the name of the Special Education Director for the school district?": knows_special_education_director_name 
    datatype: yesnoradio
  - Special Education Director Title: school.special_education_director.title
    required: False
    show if: knows_special_education_director_name
    choices: 
      - Dr.
      - Mrs.
      - Miss
      - Ms.
      - Mr.
  - Special Education Director First Name: school.special_education_director.name.first
    show if: knows_special_education_director_name
  - Special Education Director Last Name: school.special_education_director.name.last
    show if: knows_special_education_director_name
subquestion: |
  Because ${student.name.first} is not yet in school, you need to send this letter to the special education director
  for where you live. You can find out who your special education director is by searching [here](https://eecweb.eec.state.ma.us/ChildCareSearch/Special.aspx).
comment : |
  using ${student.pronoun_possessive("school district")} in the first field resulted in a parser error. Is this a bug?
---
id: kick out language
event: kick_out_language
question: |
  We are sorry.
under: |
  At this time,  this resource is only available in English and in Spanish. 
  
  If you do not speak English or need help completing this form for any reason, 
  please contact MAC’s helpline at 617-357-8431. You can leave a message with which language you speak, 
  or you can complete any portion of this form ([Massachusetts Advocates for Children Helpline](https://massadvocates.org/helpline/)) and include your language. 
  A person will call you back with an interpreter if you need one. It may take up to 3 working days for someone to call you back.

---
id: call the hotline basic information
event: call_the_hotline
question: |
  You may need more help than this form can give you
subquestion: |
  You can call Massachusetts Advocates for Children for one-on-one help.
  
  Call 617-357-8431 or ask for help online here ([Massachusetts Advocates for Children Helpline](https://massadvocates.org/helpline/))
  
  It may take up to three business days for someone to get back to you.
buttons:
  - Leave: leave
  - Restart: restart
---
id: kick out requestor
event: kick_out_requestor
question: |
  It looks like someone else needs to request these evaluations
subquestion: |
  This letter can only be filled in by a parent, guardian, or the child
  who needs services.
buttons:
  - Leave: leave
  - Restart: restart
---
---
template: evaluation_definitions
subject: |
  What evaluations can I ask for?
content: |
  #### Educational Assessment
  Educational assessments should include a history of the student’s educational progress. The history should be given by a teacher who knows the student well, in relation to the state’s learning standards. The assessments should also include the student’s attention skills, communication skills, memory, participation behaviors, and social skills with both peers and adults.

  #### Speech and Language Evaluation
  A speech and language evaluation assess the student’s physical ability to speak, pronunciation of speech sounds, use of language for different purposes, correct use of words in properly formed sentences, and voice quality.

  #### Social Pragmatic Language
  A social pragmatic language evaluation assesses how the student communicates in social situations. This includes assessing use of body language, eye contact, taking turns listening and speaking, and using the appropriate volume when speaking.

  #### Occupational Therapy
  An occupational therapy evaluation assesses the student’s fine motor skills, self-help skills, sensory processing, postural stability, visual and motor perception, task completion and organization, and social and play abilities.
  (Los Angeles Unified School District)

  #### Functional Behavior Assessment
  A functional behavior assessment (FBA) assesses a student’s behavior that is affecting his/her/their own learning or the learning of others. An FBA should identify the causes of specific problem behaviors and provide interventions to address them. 

  #### Psychological Assessment
  A psychological assessment determines the child’s learning style and provides information on what learning methods are most effective for the child. The assessment may show the child’s problem-solving abilities, memory skills, processing skills, and how the child best interprets information.

  #### Physical Therapy
  A physical therapy evaluation assesses the student’s posture, balance, strength, motor control and coordination, endurance, gross motor skills, and any other area that allows the student to physically access the educational environment.

  #### Augmentative and Alternative Communication Evaluation
  An Augmentative and Alternative Communication (AAC) evaluation assesses what communication tool(s), if any, can assist the student to communicate.  Examples of AAC methods include picture boards, manual signs, gestures, finger spelling, and speech-generating devices.  AAC is a type of assistive technology.

  #### Assistive Technology Evaluation
  An Assistive technology evaluation determines whether a student requires a technological device or service to support their learning. Low-tech devices include picture books to help non-speaking and students with limited speech communicate, line magnifiers for students to focus on one line of text at a time, and seat cushions for students with physical disabilities to maintain posture. High-tech devices include eye-gaze systems for students with physical disabilities to operate computers and software that allows the student to speak into a computer and have the text appear on the screen.

  #### Home Assessment
  A home assessment includes information on the student’s family history and home.  They may include a home visit with the parent’s agreement.

  #### Health Assessment
  A health assessment identifies medical issues that may affect the student’s learning.   
---
code: |
  terms_of_use_field = [ {"label": str(terms_of_use_label), 
    "field": "acknowledged_information_use",
    "datatype": "checkboxes",
    "minlength": 1,
    "choices": [str(terms_of_use_I_accept_label)],
    "validation messages": {
      "minlength": str(terms_of_use_validation_message_label),
    },
    }]
---
template: terms_of_use_label
content: |
  To continue, you must accept the [terms of use](https://www.gbls.org/self-help/eviction/terms-of-use)
---
template: terms_of_use_I_accept_label
content: |
  I accept the terms of use.
---
template: terms_of_use_validation_message_label
content: |
  You cannot continue unless you agree to the terms of use.